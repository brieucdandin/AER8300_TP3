package software
public

	thread ControlThread
		features
			rot_x: in data port radians;
			rot_y: in data port radians;
			rot_z: in data port radians;
			tor_x: out data port torque;
			tor_y: out data port torque;
			tor_z: out data port torque;
	end ControlThread;

	thread implementation ControlThread.impl
		properties
			Dispatch_Protocol => Periodic;
			Period => 100ms;
	end ControlThread.impl;
	
	process Controller
		features
			rot_x: in data port radians;
			rot_y: in data port radians;
			rot_z: in data port radians;
			tor_x: out data port torque;
			tor_y: out data port torque;
			tor_z: out data port torque;
		flows
			fx: flow path rot_x -> tor_x {latency => 3ms .. 5ms;};
			fy: flow path rot_y -> tor_y {latency => 3ms .. 5ms;};
			fz: flow path rot_z -> tor_z {latency => 3ms .. 5ms;};
	end Controller;
	
		process implementation Controller.impl
		subcomponents
			worker: thread ControlThread.impl;
		connections
			Rx: port rot_x -> worker.rot_x;
			Ry: port rot_y -> worker.rot_y;
			Rz: port rot_z -> worker.rot_z;
			Tx: port worker.tor_x -> tor_x;
			Ty: port worker.tor_y -> tor_y;
			Tz: port worker.tor_z -> tor_z;
	end Controller.impl;

end software;
